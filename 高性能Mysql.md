# 1. 架构与历史
存储引擎架构的设计将查询处理及其他系统任务和数据的存储、提取相分离。可以在使用时根据性能、特性以及其他需求来选择数据存储的方式。

## 1.1 逻辑架构
（图）
- 最上层客户端，完成连接处理、授权认证、安全等等。
- 第二层，实现大多数核心功能，查询、分析、优化、缓存及所有内置函数。所有跨存储引擎的功能都在这一层，存储过程、触发器、视图等等。
- 第三层，包含了存储引擎，存储引擎负责数据的存储和提取。服务器通过api与存储引擎将进行通信，这些接口屏蔽了不同存储引擎之间的差异，存储引擎不会解析SQL。

### 1.1.1 连接管理与安全性
- 每个客户端连接都会在服务器进程中拥有一个线程，这个连接的查询只会在单独的线程中执行，该线程轮流在CPU中允许，服务器负责缓存线程，因此不需要为每一个新建的连接创建或者销毁线程。
- 通过SSL进行连接

### 1.1.2 优化与执行
- 解析查询，并创建内部数据结构（解析树），然后对其进行优化，包括重写查询、决定表的读取顺序，以及选择合适的索引等。（用户可使用hint影响他的决策、使用explain请求优化器解释优化过程中的因素）———主要第六章说明。 
- 优化器不关心使用的是什么存储引擎，但存储引擎对于优化查询是有影响的。优化器会请求存储引擎提供容量或某个具体操作的开销信息——主要第4、5章
- select语句，在解析查询之前，会先检查查询缓存。如果有缓存，就不执行查询、解析、优化、执行的过程——主要第7章

## 1.2 并发控制



## 1.3 事务


## 1.4 多版本并发控制



## 1.5 MySQL的存储引擎




